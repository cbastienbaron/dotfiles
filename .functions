#!/bin/bash

# File: .functions
# Description:
#   contains all functions defined by the user. Separated from shell rc files
#   for portability between different machines.
#   Avoid syntax and commands not portable to other different setups,
#   check out http://hyperpolyglot.org/unix-shells for more information


# run command in the background
background() {
	[[ -z "$@" ]] && return 1
	"$@" &
}

# serve PWD as web server
serve() {
	# serve [port] [directory]
	local port=${1:-8000}
	local dir=$2

	xdg-open "http://localhost:$port"

	[[ -n "$dir" ]] && pushd -q $dir

	if (( $+commands[python] )); then
		python -m SimpleHTTPServer $port
	else
		php -S "0.0.0.0:$port"
	fi

	[[ -n "$dir" ]] && popd -q
}


# check if uri is up
isup() {
	local uri=$1

	if curl -s --head  --request GET "$uri" | grep "200 OK" > /dev/null ; then
		notify-send --urgency=critical "$uri is down"
	else
		notify-send --urgency=low "$uri is up"
	fi
}